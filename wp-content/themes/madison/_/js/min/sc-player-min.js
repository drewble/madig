!function($){var e=function(e){var n=function(e){return{h:Math.floor(e/36e5),m:Math.floor(e/6e4%60),s:Math.floor(e/1e3%60)}}(e),a=[];return n.h>0&&a.push(n.h),a.push(n.m<10&&n.h>0?"0"+n.m:n.m),a.push(n.s<10?"0"+n.s:n.s),a.join(".")},n=function(e){return e.sort(function(){return 1-Math.floor(3*Math.random())}),e},a=!0,t=!1,i=$(document),s=function(e){try{a&&window.console&&window.console.log&&window.console.log.apply(window.console,arguments)}catch(n){}},r=t?"sandbox-soundcloud.com":"soundcloud.com",o="https:"===document.location.protocol,c=function(e,n){var a=(o||/^https/i.test(e)?"https":"http")+"://api."+r+"/resolve?url=",t="format=json&consumer_key="+n+"&callback=?";return o&&(e=e.replace(/^http:/,"https:")),/api\./.test(e)?e+"?"+t:a+e+"&"+t},l=function(){var e=function(){var e=!1;try{var n=new Audio;e=n.canPlayType&&/maybe|probably/.test(n.canPlayType("audio/mpeg"))}catch(a){}return e}(),n={onReady:function(){i.trigger("scPlayer:onAudioReady")},onPlay:function(){i.trigger("scPlayer:onMediaPlay")},onPause:function(){i.trigger("scPlayer:onMediaPause")},onEnd:function(){i.trigger("scPlayer:onMediaEnd")},onBuffer:function(e){i.trigger({type:"scPlayer:onMediaBuffering",percent:e})}},a=function(){var e=new Audio,a=function(e){var a=e.target,t=(a.buffered.length&&a.buffered.end(0))/a.duration*100;n.onBuffer(t),a.currentTime===a.duration&&n.onEnd()},t=function(e){var a=e.target,t=(a.buffered.length&&a.buffered.end(0))/a.duration*100;n.onBuffer(t)};return $('<div class="sc-player-engine-container"></div>').appendTo(document.body).append(e),e.addEventListener("play",n.onPlay,!1),e.addEventListener("pause",n.onPause,!1),e.addEventListener("timeupdate",a,!1),e.addEventListener("progress",t,!1),{load:function(n,a){e.pause(),e.src=n.stream_url+(/\?/.test(n.stream_url)?"&":"?")+"consumer_key="+a,e.load(),e.play()},play:function(){e.play()},pause:function(){e.pause()},stop:function(){e.currentTime&&(e.currentTime=0,e.pause())},seek:function(n){e.currentTime=e.duration*n,e.play()},getDuration:function(){return 1e3*e.duration},getPosition:function(){return 1e3*e.currentTime},setVolume:function(n){e.volume=n/100}}},t=function(){var e="scPlayerEngine",a,t=function(n){var a=(o?"https":"http")+"://player."+r+"/player.swf?url="+n+"&amp;enable_api=true&amp;player_type=engine&amp;object_id="+e;return $.browser.msie?'<object height="100%" width="100%" id="'+e+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" data="'+a+'"><param name="movie" value="'+a+'" /><param name="allowscriptaccess" value="always" /></object>':'<object height="100%" width="100%" id="'+e+'"><embed allowscriptaccess="always" height="100%" width="100%" src="'+a+'" type="application/x-shockwave-flash" name="'+e+'" /></object>'};return soundcloud.addEventListener("onPlayerReady",function(t,i){a=soundcloud.getPlayer(e),n.onReady()}),soundcloud.addEventListener("onMediaEnd",n.onEnd),soundcloud.addEventListener("onMediaBuffering",function(e,a){n.onBuffer(a.percent)}),soundcloud.addEventListener("onMediaPlay",n.onPlay),soundcloud.addEventListener("onMediaPause",n.onPause),{load:function(e){var n=e.uri;a?a.api_load(n):$('<div class="sc-player-engine-container"></div>').appendTo(document.body).html(t(n))},play:function(){a&&a.api_play()},pause:function(){a&&a.api_pause()},stop:function(){a&&a.api_stop()},seek:function(e){a&&a.api_seekTo(a.api_getTrackDuration()*e)},getDuration:function(){return a&&a.api_getTrackDuration&&1e3*a.api_getTrackDuration()},getPosition:function(){return a&&a.api_getTrackPosition&&1e3*a.api_getTrackPosition()},setVolume:function(e){a&&a.api_setVolume&&a.api_setVolume(e)}}};return e?a():t()}(),u,d=!1,p=[],f={},v,y=function(e,n,a){var t=0,i={node:e,tracks:[]},s=function(e){var a=c(e.url,u);$.getJSON(a,function(r){t+=1,r.tracks?i.tracks=i.tracks.concat(r.tracks):r.duration?(r.permalink_url=e.url,i.tracks.push(r)):r.creator?n.push({url:r.uri+"/tracks"}):r.username?n.push(/favorites/.test(e.url)?{url:r.uri+"/favorites"}:{url:r.uri+"/tracks"}):$.isArray(r)&&(i.tracks=i.tracks.concat(r)),n[t]?s(n[t]):i.node.trigger({type:"onTrackDataLoaded",playerObj:i,url:a})})};u=a,p.push(i),s(n[t])},m=function(e,n){return n?'<div class="sc-loading-artwork">Loading Artwork</div>':e.artwork_url?'<img src="'+e.artwork_url.replace("-large","-t300x300")+'"/>':'<div class="sc-no-artwork">No Artwork</div>'},h=function(n,a){$(".sc-info",n).each(function(e){$("h3",this).html('<a href="'+a.permalink_url+'">'+a.title+"</a>"),$("h4",this).html('by <a href="'+a.user.permalink_url+'">'+a.user.username+"</a>"),$("p",this).html(a.description||"no Description")}),$(".sc-artwork-list li",n).each(function(e){var n=$(this),t=n.data("sc-track");t===a?n.addClass("active").find(".sc-loading-artwork").each(function(e){$(this).removeClass("sc-loading-artwork").html(m(a,!1))}):n.removeClass("active")}),$(".sc-duration",n).html(e(a.duration)),$(".sc-waveform-container",n).html('<img src="'+a.waveform_url+'" />'),n.trigger("onPlayerTrackSwitch.scPlayer",[a])},g=function(e){var n=e.permalink_url;v===n?l.play():(v=n,l.load(e,u))},k=function(e){return p[$(e).data("sc-player").id]},P=function(e,n){n&&$("div.sc-player.playing").removeClass("playing"),$(e).toggleClass("playing",n).trigger(n?"onPlayerPlay":"onPlayerPause")},w=function(e,n){var a=k(e).tracks[n||0];h(e,a),f={$buffer:$(".sc-buffer",e),$played:$(".sc-played",e),position:$(".sc-position",e)[0]},P(e,!0),g(a)},b=function(e){P(e,!1),l.pause()},T=function(){var n=f.$played.closest(".sc-player"),a;f.$played.css("width","0%"),f.position.innerHTML=e(0),P(n,!1),l.stop(),n.trigger("onPlayerTrackFinish")},_=function(e,n){l.seek(n),$(e).trigger("onPlayerSeek")},M=function(e){var n=$(e);s("track finished get the next one"),$nextItem=$(".sc-trackslist li.active",n).next("li"),$nextItem.length||($nextItem=n.nextAll("div.sc-player:first").find(".sc-trackslist li.active")),$nextItem.click()},C=function(){var e=80,n=document.cookie.split(";"),a=new RegExp("scPlayer_volume=(\\d+)");for(var t in n)if(a.test(n[t])){e=parseInt(n[t].match(a)[1],10);break}return e}(),E=function(e){var n=Math.floor(e),a=new Date;a.setTime(a.getTime()+31536e6),C=n,document.cookie=["scPlayer_volume=",n,"; expires=",a.toUTCString(),'; path="/"'].join(""),l.setVolume(C)},D;i.bind("scPlayer:onAudioReady",function(e){s("onPlayerReady: audio engine is ready"),l.play(),E(C)}).bind("scPlayer:onMediaPlay",function(n){clearInterval(D),D=setInterval(function(){var n=l.getDuration(),a=l.getPosition(),t=a/n;f.$played.css("width",100*t+"%"),f.position.innerHTML=e(a),i.trigger({type:"onMediaTimeUpdate.scPlayer",duration:n,position:a,relative:t})},500)}).bind("scPlayer:onMediaPause",function(e){clearInterval(D),D=null}).bind("scPlayer:onVolumeChange",function(e){E(e.volume)}).bind("scPlayer:onMediaEnd",function(e){T()}).bind("scPlayer:onMediaBuffering",function(e){f.$buffer.css("width",e.percent+"%")}),$.scPlayer=function(a,t){var i=$.extend({},$.scPlayer.defaults,a),s=p.length,r=t&&$(t),o=r[0].className.replace("sc-player",""),c=i.links||$.map($("a",r).add(r.filter("a")),function(e){return{url:e.href,title:e.innerHTML}}),l=$('<div class="sc-player loading"></div>').data("sc-player",{id:s}),u=$('<div class="row"><div>').appendTo(l),f=$('<ol class="sc-artwork-list"></ol>').appendTo(l),v=$('<div class="sc-info"><h3></h3><h4></h4><p></p><a href="#" class="sc-info-close">X</a></div>').appendTo(l),g=$('<div class="medium-2 small-3 columns control-wrap"></div>').appendTo(u),k=$('<div class="sc-controls"></div>').appendTo(g),P=$('<div class="medium-10 small-9 columns list-wrap"></div>').appendTo(u),b=$('<ul class="sc-trackslist small-block-grid-1 medium-block-grid-2 large-block-grid-3"></ul>').appendTo(P);return(o||i.customClass)&&l.addClass(o).addClass(i.customClass),l.find(".sc-controls").append('<a href="#play" class="sc-play"><span class="icon-play3"></span></a> <a href="#pause" class="sc-pause hidden"><span class="icon-pause"></span></a>').end().append('<a href="#info" class="sc-info-toggle">Info</a>').append('<div class="sc-scrubber"></div>').find(".sc-scrubber").append('<div class="sc-volume-slider"><span class="sc-volume-status" style="width:'+C+'%"></span></div>').append('<div class="sc-time-span"><div class="sc-waveform-container"></div><div class="sc-buffer"></div><div class="sc-played"></div></div>').append('<div class="sc-time-indicators"><span class="sc-position"></span> <span class="sc-duration"></span></div>'),y(l,c,i.apiKey),l.bind("onTrackDataLoaded.scPlayer",function(a){var t=a.playerObj.tracks;i.randomize&&(t=n(t)),$.each(t,function(n,a){var t=0===n;$('<li><a href="'+a.permalink_url+'">'+a.title+'</a><span class="sc-track-duration">'+e(a.duration)+"</span></li>").data("sc-track",{id:n}).toggleClass("active",t).appendTo(b),$("<li></li>").append(m(a,n>=i.loadArtworks)).appendTo(f).toggleClass("active",t).data("sc-track",a)}),l.each(function(){$.isFunction(i.beforeRender)&&i.beforeRender.call(this,t)}),$(".sc-duration",l)[0].innerHTML=e(t[0].duration),$(".sc-position",l)[0].innerHTML=e(0),h(l,t[0]),i.continuePlayback&&l.bind("onPlayerTrackFinish",function(e){M(l)}),l.removeClass("loading").trigger("onPlayerInit"),i.autoPlay&&!d&&(w(l),d=!0)}),r.each(function(e){$(this).replaceWith(l)}),l},$.scPlayer.stopAll=function(){$(".sc-player.playing a.sc-pause").click()},$.scPlayer.destroy=function(){$(".sc-player, .sc-player-engine-container").remove()},$.fn.scPlayer=function(e){return d=!1,this.each(function(){$.scPlayer(e,this)}),this},$.scPlayer.defaults=$.fn.scPlayer.defaults={customClass:null,beforeRender:function(e){var n=$(this)},onDomReady:function(){$("a.sc-player, div.sc-player").scPlayer()},autoPlay:!1,continuePlayback:!0,randomize:!1,loadArtworks:5,apiKey:"htuiRd1JP11Ww0X72T1C3g"},$("a.sc-play, a.sc-pause").live("click",function(e){var n=$(this).closest(".sc-player").find("ul.sc-trackslist");return n.find("li.active").click(),!1}),$("a.sc-info-toggle, a.sc-info-close").live("click",function(e){var n=$(this);return n.closest(".sc-player").find(".sc-info").toggleClass("active").end().find("a.sc-info-toggle").toggleClass("active"),!1}),$(".sc-trackslist li").live("click",function(e){var n=$(this),a=n.closest(".sc-player"),t=n.data("sc-track").id,i=a.is(":not(.playing)")||n.is(":not(.active)");return i?w(a,t):b(a),n.addClass("active").siblings("li").removeClass("active"),$(".artworks li",a).each(function(e){$(this).toggleClass("active",e===t)}),!1});var L=function(e,n){var a=$(e).closest(".sc-time-span"),t=a.find(".sc-buffer"),i=a.find(".sc-waveform-container img"),s=a.closest(".sc-player"),r=Math.min(t.width(),n-i.offset().left)/i.width();_(s,r)},R=function(e){1===e.targetTouches.length&&(L(e.target,e.targetTouches&&e.targetTouches.length&&e.targetTouches[0].clientX),e.preventDefault())};$(".sc-time-span").live("click",function(e){return L(this,e.pageX),!1}).live("touchstart",function(e){this.addEventListener("touchmove",R,!1),e.originalEvent.preventDefault()}).live("touchend",function(e){this.removeEventListener("touchmove",R,!1),e.originalEvent.preventDefault()});var x=function(e,n){var a=$(e),t=a.offset().left,s=a.width(),r=function(e){return Math.floor((e-t)/s*100)},o=function(e){i.trigger({type:"scPlayer:onVolumeChange",volume:r(e.pageX)})};a.bind("mousemove.sc-player",o),o(n)},A=function(e,n){$(e).unbind("mousemove.sc-player")};$(".sc-volume-slider").live("mousedown",function(e){x(this,e)}).live("mouseup",function(e){A(this,e)}),i.bind("scPlayer:onVolumeChange",function(e){$("span.sc-volume-status").css({width:e.volume+"%"})}),$(function(){$.isFunction($.scPlayer.defaults.onDomReady)&&$.scPlayer.defaults.onDomReady()})}(jQuery);